"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _vueProgressbar=require("./vue-progressbar.vue"),_vueProgressbar2=_interopRequireDefault(_vueProgressbar);const regexColor=new RegExp("(^#[0-9a-fA-F]{6}$)|(^#[0-9a-fA-F]{3}$)|(^rgb([0-9]{1,3}, [0-9]{1,3}, [0-9]{1,3})$)"),regexLocation=new RegExp("(left|right|top|bottom)"),regexTime=new RegExp("(\\d+\\.\\d+)(s|ms)|(\\.\\d+)(s|ms)|(\\d+)(s|ms)"),regexThickness=new RegExp("(\\d+\\.\\d+)(px|em|pt|%|vh|vw)|(\\.\\d+)(px|em|pt|%|vh|vw)|(\\d+)(px|em|pt|%|vh|vw)");module.exports.install=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=("2"===t.version.split(".")[0],"undefined"!=typeof window),s={$root:null,state:{pTime:null,settings:null,timer:null,hideTimer:null,hideTimer2:null,revertTimer:null,cut:0},log:function(t){this.state.settings.debug&&console.log(t)},init:function(t){this.$root=t,this.state.settings=this.$root.RADON_LOADING_BAR.options},start:function(t){this.$root.RADON_LOADING_BAR.temp.use?this.state.settings=this.$root.RADON_LOADING_BAR.temp:this.state.settings=this.$root.RADON_LOADING_BAR.options;var e=this;t||(regexTime.test(this.state.settings.transition.time)?(this.state.pTime=parseFloat(this.state.settings.transition.time.replace("/(ms|s)/")),this.state.settings.transition.time.includes("ms")||(this.state.pTime*=1e3),t=this.state.pTime):(this.log("invalid time: "+this.state.settings.transition.time),this.log("valid formats: ##, #.#, .# [ms|s]"),this.log("example: 1000ms, 1.0s, .10ms"),this.state.pTime=t=3e3)),this.$root&&(this.$root.RADON_LOADING_BAR.hidden=!1,this.state.settings.show=!0,this.state.settings.canSuccess=!0,this.state.cut=1e4/Math.floor(t),this.state.timer=setInterval(function(){e.increase(e.state.cut*Math.random()),e.$root.RADON_LOADING_BAR.percent>95&&e.finish()},100))},set:function(t){this.state.settings.show=!0,this.state.settings.canSuccess=!0,this.$root.RADON_LOADING_BAR.percent=Math.floor(t)},h_setFailColor:function(t,e){e?(this.$root.RADON_LOADING_BAR.temp.failedColor=t,this.$root.RADON_LOADING_BAR.temp.use?null:this.$root.RADON_LOADING_BAR.temp.use=!0):this.$root.RADON_LOADING_BAR.options.failedColor=t},h_setColor:function(t,e){e?(this.$root.RADON_LOADING_BAR.temp.color=t,this.$root.RADON_LOADING_BAR.temp.use?null:this.$root.RADON_LOADING_BAR.temp.use=!0):this.$root.RADON_LOADING_BAR.options.color=t},h_setLocation:function(t,e){e?(this.$root.RADON_LOADING_BAR.temp.location=t,this.$root.RADON_LOADING_BAR.temp.use?null:this.$root.RADON_LOADING_BAR.temp.use=!0):this.$root.RADON_LOADING_BAR.options.location=t},h_setTransition:function(t,e){e?(this.$root.RADON_LOADING_BAR.temp.transition=t,this.$root.RADON_LOADING_BAR.temp.use?null:this.$root.RADON_LOADING_BAR.temp.use=!0):this.$root.RADON_LOADING_BAR.options.transition=t},h_setInverse:function(t,e){e?(this.$root.RADON_LOADING_BAR.temp.inverse=t,this.$root.RADON_LOADING_BAR.temp.use?null:this.$root.RADON_LOADING_BAR.temp.use=!0):this.$root.RADON_LOADING_BAR.options.inverse=t},h_setThickness:function(t,e){e?(this.$root.RADON_LOADING_BAR.temp.thickness=t,this.$root.RADON_LOADING_BAR.temp.use?null:this.$root.RADON_LOADING_BAR.temp.use=!0):this.$root.RADON_LOADING_BAR.options.thickness=t},get:function(){return Math.floor(this.$root.RADON_LOADING_BAR.percent)},increase:function(t){this.$root.RADON_LOADING_BAR.percent=this.$root.RADON_LOADING_BAR.percent+Math.floor(t)},decrease:function(t){this.$root.RADON_LOADING_BAR.percent=this.$root.RADON_LOADING_BAR.percent-Math.floor(t)},readyToRevert:function(){if(this.$root.RADON_LOADING_BAR.hidden)this.revert();else{var t=this;this.state.revertTimer=setTimeout(function(){t.readyToRevert()},500)}},revert:function(){this.$root.RADON_LOADING_BAR.temp={use:!1,debug:this.$root.RADON_LOADING_BAR.options.debug,canSuccess:this.$root.RADON_LOADING_BAR.options.canSuccess,show:this.$root.RADON_LOADING_BAR.options.show,color:this.$root.RADON_LOADING_BAR.options.color,failedColor:this.$root.RADON_LOADING_BAR.options.failedColor,thickness:this.$root.RADON_LOADING_BAR.options.thickness,autoRevert:this.$root.RADON_LOADING_BAR.options.autoRevert,location:this.$root.RADON_LOADING_BAR.options.location,inverse:this.$root.RADON_LOADING_BAR.options.inverse,transition:this.$root.RADON_LOADING_BAR.options.transition},this.log("reverted.")},quickHide:function(){return this.$root.RADON_LOADING_BAR.quickHide=!0,this.$root.RADON_LOADING_BAR.percent=0,clearInterval(this.state.timer),clearTimeout(this.state.hideTimer),clearTimeout(this.state.hideTimer2),this.state.timer=null,this.state.settings.autoRevert&&this.$root.RADON_LOADING_BAR.temp.use&&(clearTimeout(this.state.revertTimer),this.revert()),!0},hide:function(){clearInterval(this.state.timer),this.state.timer=null;var t=this;this.state.settings.autoRevert&&t.$root.RADON_LOADING_BAR.temp.use&&this.readyToRevert(),this.state.hideTimer=setTimeout(function(){t.$root.RADON_LOADING_BAR.options.show=!1,t.$root.RADON_LOADING_BAR.percent=0,t.state.hideTimer2=setTimeout(function(){t.$root.RADON_LOADING_BAR.hidden=!0},t.state.pTime)},this.state.pTime)},pause:function(){clearInterval(this.state.timer)},finish:function(){this.$root&&(this.$root.RADON_LOADING_BAR.percent=100,this.hide())},fail:function(t){this.state.settings.canSuccess=!1,this.$root.RADON_LOADING_BAR.percent=100,this.hide()},callMeta:function(){var t,e=Array.prototype.slice.call(arguments);t="temp"===e[1],"color"===e[0]?this.call("set","color",e[2],t):"fail"===e[0]?this.call("set","fail",e[2],t):"location"===e[0]?this.call("set","location",e[2],t):"transition"===e[0]?this.call("set","transition",e[2],t):"inverse"===e[0]?this.call("set","inverse",e[2],t):"thickness"===e[0]&&this.call("set","thickness",e[2],t)},callSetTemp:function(){var t=Array.prototype.slice.call(arguments);if("color"===t[0])this.validColor(t[1])?this.h_setColor(t[1],t[2]):this.log('invalid color input: "'+t[1]+'"');else if("fail"===t[0])this.validColor(t[1])?this.h_setFailColor(t[1],t[2]):this.log('invalid color input: "'+t[1]+'"');else if("location"===t[0])this.validLocation(t[1])?this.h_setLocation(t[1],t[2]):this.log('invalid location input: "'+t[1]+'"');else if("transition"===t[0]){var e=this.$root.RADON_LOADING_BAR.options.transition;void 0!==t[1].time&&(this.validTime(t[1].time)?e.time=t[1].time:this.log('invalid transition time: "'+t[1].time+'". Using default.')),void 0!==t[1].opacity&&(this.validTime(t[1].opacity)?e.opacity=t[1].opacity:this.log('invalid transition opacity: "'+t[1].opacity+'". Using default.')),this.h_setTransition(e,t[2])}else"inverse"===t[0]?"boolean"==typeof t[1]?this.h_setInverse(t[1],t[2]):this.log('invalid inverse: "'+t[1]+'"'):"thickness"===t[0]&&(this.validThickness(t[1])?this.h_setThickness(t[1],t[2]):this.log('invalid thickness: "'+t[1]+'"'))},callRevert:function(t){"color"===t?this.h_setColor(this.$root.RADON_LOADING_BAR.options.color,!0):"fail"===t?this.h_setFailColor(this.$root.RADON_LOADING_BAR.options.fail,!0):"location"===t?this.h_setLocation(this.$root.RADON_LOADING_BAR.options.location,!0):"transition"===t?this.h_setTransition(this.$root.RADON_LOADING_BAR.options.transition,!0):"inverse"===t?this.h_setInverse(this.$root.RADON_LOADING_BAR.options.inverse,!0):"thickness"===t&&this.h_setThickness(this.$root.RADON_LOADING_BAR.options.thickness,!0)},call:function(){var t,e=Array.prototype.slice.call(arguments);switch(t="temp"!==e[0]&&"set"!==e[0]||void 0===e[3]?null:e[3],e[0]){case"meta":this.callMeta(e[1],e[2],e[3]);break;case"temp":null===t&&(t=!0),this.callSetTemp(e[1],e[2],t);break;case"set":null===t&&(t=!1),this.callSetTemp(e[1],e[2],t);break;case"revert":this.callRevert(e[1])}},validColor:function(t){return regexColor.test(t)},validLocation:function(t){return regexLocation.test(t)},validTime:function(t){return regexTime.test(t)},validThickness:function(t){return regexThickness.test(t)},parseMeta:function(t){for(var e in t.func)this.call("meta",t.func[e].call,t.func[e].modifier,t.func[e].argument)}},o=new t({data:{RADON_LOADING_BAR:{percent:0,hidden:!0,quickHide:!1,temp:{use:!1,autoRevert:!0,canSuccess:!0,color:"rgb(19, 91, 55)",debug:!1,failedColor:"red",inverse:!1,location:"top",show:!1,thickness:"2px",transition:{time:"0.2s",opacity:"0.6s"}},options:{autoRevert:void 0===e.autoRevert||e.autoRevert,canSuccess:!0,color:e.color||"rgb(19, 91, 55)",debug:e.debug||!1,failedColor:e.failedColor||"red",inverse:e.inverse||!1,location:e.location||"top",show:!1,thickness:e.thickness||"2px",transition:e.transition||{time:"0.2s",opacity:"0.6s"}}}}});i&&(window.VueProgressBarEventBus=o,s.init(o)),t.component("vue-progress-bar",_vueProgressbar2.default),t.prototype.$Progress=s};